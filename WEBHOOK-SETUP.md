# –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Webhook –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ —Ç–µ–º—ã

## ‚úÖ –®–∞–≥ 1: –ó–∞–≥—Ä—É–∑–∏—Ç–µ webhook —Å–∫—Ä–∏–ø—Ç –Ω–∞ —Ö–æ—Å—Ç–∏–Ω–≥

1. –§–∞–π–ª —É–∂–µ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏: `wp-content/webhook-theme-deploy.php`
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —ç—Ç–æ—Ç —Ñ–∞–π–ª –Ω–∞ —Ö–æ—Å—Ç–∏–Ω–≥ –≤: `public_html/wp-content/webhook-theme-deploy.php`
3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∞–≤–∞: `chmod 755 webhook-theme-deploy.php` (—á–µ—Ä–µ–∑ File Manager –∏–ª–∏ FTP)

## ‚úÖ –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –≤ —Å–∫—Ä–∏–ø—Ç–µ

–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `webhook-theme-deploy.php` –Ω–∞ —Ö–æ—Å—Ç–∏–Ω–≥–µ –∏ –∏–∑–º–µ–Ω–∏—Ç–µ:

```php
// –ù–∞–π–¥–∏—Ç–µ —ç—Ç—É —Å—Ç—Ä–æ–∫—É (–æ–∫–æ–ª–æ —Å—Ç—Ä–æ–∫–∏ 20):
define('WEBHOOK_SECRET', 'your-secret-key-here-change-me');

// –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Å–≤–æ–π —Å–ª—É—á–∞–π–Ω—ã–π –∫–ª—é—á, –Ω–∞–ø—Ä–∏–º–µ—Ä:
define('WEBHOOK_SECRET', 'my-super-secret-key-2024-antongotry');
```

**–í–∞–∂–Ω–æ:** –ó–∞–ø–æ–º–Ω–∏—Ç–µ —ç—Ç–æ—Ç –∫–ª—é—á, –æ–Ω –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ GitHub!

## ‚úÖ –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Webhook –Ω–∞ GitHub

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ GitHub: https://github.com/Antongotry/gotrydev/settings/hooks
2. –ù–∞–∂–º–∏—Ç–µ **"Add webhook"**
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ:
   - **Payload URL:** 
     ```
     https://antongotry.dev/wp-content/webhook-theme-deploy.php?secret=–í–ê–®_–°–ï–ö–†–ï–¢–ù–´–ô_–ö–õ–Æ–ß
     ```
     (–ó–∞–º–µ–Ω–∏—Ç–µ `–í–ê–®_–°–ï–ö–†–ï–¢–ù–´–ô_–ö–õ–Æ–ß` –Ω–∞ —Ç–æ—Ç, –∫–æ—Ç–æ—Ä—ã–π —É–∫–∞–∑–∞–ª–∏ –≤ —à–∞–≥–µ 2)
   
   - **Content type:** `application/json`
   
   - **Secret:** (–æ—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è GET –ø–∞—Ä–∞–º–µ—Ç—Ä)
   
   - **Events:** –í—ã–±–µ—Ä–∏—Ç–µ **"Just the push event"** (—Ç–æ–ª—å–∫–æ push —Å–æ–±—ã—Ç–∏—è)
   
   - **Active:** ‚úì (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≥–∞–ª–æ—á–∫–∞)

4. –ù–∞–∂–º–∏—Ç–µ **"Add webhook"**

## ‚úÖ –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É

1. –°–¥–µ–ª–∞–π—Ç–µ –Ω–µ–±–æ–ª—å—à–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –≤ —Ç–µ–º–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–æ–±–∞–≤—å—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –≤ `style.css`)
2. –ó–∞–∫–æ–º–º–∏—Ç—å—Ç–µ –∏ –∑–∞–ø—É—à—å—Ç–µ:
   ```bash
   git add wp-content/themes/gotry/style.css
   git commit -m "Test webhook"
   git push origin main
   ```

3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞ GitHub:
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Settings ‚Üí Webhooks** –≤–∞—à–µ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
   - –ù–∞–∂–º–∏—Ç–µ –Ω–∞ —Å–æ–∑–¥–∞–Ω–Ω—ã–π webhook
   - –í —Ä–∞–∑–¥–µ–ª–µ **"Recent Deliveries"** –¥–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è –Ω–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å
   - –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –Ω–µ–≥–æ –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ **"Response"** ‚Äî –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å `200 OK`

4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ —Ö–æ—Å—Ç–∏–Ω–≥–µ:
   - –§–∞–π–ª: `public_html/wp-content/webhook-theme-deploy.log`
   - –¢–∞–º –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–ø–∏—Å–∏ –æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏

## üîç –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. –ö–æ–≥–¥–∞ –≤—ã –¥–µ–ª–∞–µ—Ç–µ `git push` –Ω–∞ GitHub
2. GitHub –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç POST –∑–∞–ø—Ä–æ—Å –Ω–∞ –≤–∞—à webhook URL
3. –°–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:
   - –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ª–∏ —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á
   - –≠—Ç–æ push –≤ –≤–µ—Ç–∫—É `main`?
   - –ï—Å—Ç—å –ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ø–∞–ø–∫–µ `wp-content/themes/gotry/`?
4. –ï—Å–ª–∏ –≤—Å–µ OK ‚Äî –æ–±–Ω–æ–≤–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ —Ñ–∞–π–ª—ã —Ç–µ–º—ã –Ω–∞ —Ö–æ—Å—Ç–∏–Ω–≥–µ
5. –û—Å—Ç–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã WordPress –Ω–µ —Ç—Ä–æ–≥–∞—é—Ç—Å—è!

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –Ω–µ—Å–∞–Ω–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è, —á—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ –≤ –ø–∞–ø–∫–µ —Ç–µ–º—ã
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π
- ‚úÖ –ù–µ —É–¥–∞–ª—è–µ—Ç `wp-config.php` –∏ –¥—Ä—É–≥–∏–µ –≤–∞–∂–Ω—ã–µ —Ñ–∞–π–ª—ã

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

- Webhook –æ–±–Ω–æ–≤–ª—è–µ—Ç **–¢–û–õ–¨–ö–û** –ø–∞–ø–∫—É —Ç–µ–º—ã (`wp-content/themes/gotry/`)
- `wp-config.php`, `.htaccess`, `wp-content/uploads/` –Ω–µ —Ç—Ä–æ–≥–∞—é—Ç—Å—è
- –ï—Å–ª–∏ –Ω–∞ —Ö–æ—Å—Ç–∏–Ω–≥–µ –Ω–µ—Ç Git ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∑–∞–≥—Ä—É–∑–∫–∞ —á–µ—Ä–µ–∑ GitHub API (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

## üêõ Troubleshooting

**Webhook –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ URL –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö GitHub
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ñ–∞–π–ª `webhook-theme-deploy.php` –¥–æ—Å—Ç—É–ø–µ–Ω (–º–æ–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `wp-content/webhook-theme-deploy.log`

**–ü–æ–ª—É—á–∞–µ—Ç–µ –æ—à–∏–±–∫—É 401 (Unauthorized):**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –≤ URL –∏ –≤ —Å–∫—Ä–∏–ø—Ç–µ ‚Äî –æ–Ω–∏ –¥–æ–ª–∂–Ω—ã —Å–æ–≤–ø–∞–¥–∞—Ç—å

**–¢–µ–º–∞ –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ –ø–∞–ø–∫—É `wp-content/themes/gotry/` (–¥–æ–ª–∂–Ω—ã –±—ã—Ç—å 755)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ webhook
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–º–º–∏—Ç–µ –∫–∞—Å–∞—é—Ç—Å—è —Ñ–∞–π–ª–æ–≤ —Ç–µ–º—ã

## üìù –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: –ü—Ä–æ—Å—Ç–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Ä—É—á–Ω—É—é

–ï—Å–ª–∏ webhook –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–ª–∏ –Ω–µ –Ω—É–∂–µ–Ω:
- –ü—Ä–æ—Å—Ç–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ —Ñ–∞–π–ª—ã —Ç–µ–º—ã —á–µ—Ä–µ–∑ File Manager/FTP –≤—Ä—É—á–Ω—É—é
- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ FTP –∫–ª–∏–µ–Ω—Ç (FileZilla) –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –ø–∞–ø–∫–∏ —Ç–µ–º—ã
